# This will restrict the access of wp-admin to the EPFL campus,
# docker and OpenShift.

<LocationMatch ".*/wp-login.php.*">
    <If "!req('HOST') in {'charte-wp.epfl.ch', 'dream-team.epfl.ch'}">
        # docker private network
        Require ip 172.16.0.0/12

        # EPFL IPv4 & IPv6
        Require ip 128.178.0.0/15
        Require ip 2001:620:618::/48

        # OpenShift cluster
        Require ip 10.180.21.0/24
    </If>
</LocationMatch>

<LocationMatch ".*/wp-admin.*">
    <If "!req('HOST') in {'charte-wp.epfl.ch', 'dcsl.epfl.ch', 'courtine-lab.epfl.ch'}">
        # docker private network
        Require ip 172.16.0.0/12

        # EPFL IPv4 & IPv6
        Require ip 128.178.0.0/15
        Require ip 2001:620:618::/48

        # OpenShift cluster
        Require ip 10.180.21.0/24
    </If>
</LocationMatch>
